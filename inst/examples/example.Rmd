---
title: "A basic example Rmd document"
author: "Paul Northrop"
date: "29/07/2022"
lang: "en-gb"
---

## Text, bullets, links

For more information see  the[accessr site](https://paulnorthrop.github.io/accessr/) on GitHub

* Bullet 1
* Bullet 2

## Displayed equations

$$\mbox{var}\left(\,\overline{X}\,\right)=\mbox{var}\left(\frac1n \sum_{i=1}^n X_i\right)=\frac1{n^2}\mbox{var}\left(\sum_{i=1}^n X_i\right) 
=\frac1{n^2} \sum_{i=1}^n \mbox{var}(X_i)
= \frac1{n^2} n \sigma^2 = \frac{\sigma^2}{n}.$$

$$
\begin{eqnarray}
T = \left\{\begin{array}{ll}
\overline{X}     & \mbox{ with probability } 1 - 1/n \\
\overline{X} + n & \mbox{ with probability } 1/n \,. \\
\end{array}\right.
\end{eqnarray}
$$

\[
\begin{aligned}
P(X \leq x)
&= P(F^{-1}(U) \leq x) \\
&= P(F(F^{-1}(U)) \leq F(x)) \\
&= P(U \leq F(x)) = F(x)
\end{aligned}
\]

I haven't looked into the issue of creating equation numbers.

Tips (prompted by pecularities when creating Word output):

* We need to wrap LaTeX maths environments in ```$$ ... $$```.  Otherwise, the maths is ignored.
* Use ```\text{text in equation}``` or ```\mbox{text in equation}``` to typeset text in an maths environment. (Using ```\rm{text in equation}``` or ```{\rm text in equation}``` causes problems.)

## R-generated figure

```{r r_figure, fig.alt = "Alt text.", fig.cap = "Figure caption.", echo = TRUE, out.width="50%", fig.align='center'}
plot(1:10, 1:10, pch = 1:10, xlab = "x", ylab = "y")
```

## External figure (png file)

```{r ext_figure, fig.alt = "Alt text.", fig.cap = "Figure caption.", echo = TRUE, out.width="50%", fig.align='center'}
knitr::include_graphics(system.file(package = "accessr", "examples", "plot.png"))
```

## Table 

The table will only appear if both of the packages `dplyr` or `huxtable` are installed.  The `huxtable` code is hidden because it is lengthy. Of course, there are many other ways to create tables in R markdown.

```{r package_check, echo = FALSE}
got_dplyr <- requireNamespace("dplyr", quietly = TRUE)
got_huxtable <- requireNamespace("huxtable", quietly = TRUE)
got_both <- got_dplyr && got_huxtable
```

```{r table, echo=FALSE, message=FALSE, eval = got_both, fig.cap = "PJN"}
library(dplyr)
library(huxtable)
row1 <- c("1", "A", "36", "24")
row2 <- c("", "B", "24", "16")
row3 <- c("2", "A", "4", "16")
row4 <- c("", "B", "16", "64")
blank <- rep("", 4)
x <- as.data.frame(rbind(row1, row2, row3, row4))
colnames(x) <- c("clinic", "drug", "success (S)", "failure (F)")
x_hux <- x %>% 
  as_hux() %>%
  set_top_border(c(2, 4), everywhere, brdr(1, "solid", "black")) %>%
  set_right_border(everywhere, 1:3, brdr(1, "solid", "black")) %>%
  set_align(everywhere, 1:4, "center") %>%
  set_width(0.8) %>% 
  set_height(0.001) %>% 
  set_number_format(everywhere, everywhere, 0) %>% 
  set_all_padding(3) %>%
  set_outer_padding(0) %>%
  set_caption("Table caption")
x_hux    
```
